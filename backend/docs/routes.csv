API路径,HTTP方法,处理函数,服务层调用,仓库层调用,备注
/api/v1/login,POST,userHandler.Login,"UserService.Login(req.Username, req.Password)",UserRepo.UserWithRoleInfo(username),用户登录接口，验证用户密码并返回token
/api/v1/captcha,GET,GenerateCaptcha,utils.GenerateCaptcha(),,生成图形验证码
/api/v1/logout,POST,userHandler.Logout,,,用户退出登录
/api/v1/users,POST,userHandler.CreateUser,"UserService.CreateUser(req.Username, req.Password, req.Email, req.Nickname)",UserRepo.Create(user),创建新用户
/api/v1/users,GET,userHandler.GetUsers,"UserService.GetUsers(pageSize, offset)","UserRepo.List(limit, offset) + UserRepo.GetTotal()",获取用户列表（分页）
/api/v1/users/:id,GET,userHandler.GetUserInfo,UserService.GetUserByID(userID),UserRepo.GetByID(id),根据ID获取用户详情
/api/v1/users/:id,PUT,userHandler.UpdateUser,"UserService.UpdateUser(userID, req)",UserRepo.Update(user),更新用户信息
/api/v1/users/:id/status,PUT,userHandler.UpdateUserStatus,"UserService.UpdateUserStatus(userID, status)","UserRepo.UpdateStatus(id, status)",更新用户状态（启用/禁用）
/api/v1/users/:id,DELETE,userHandler.DeleteUser,UserService.DeleteUser(userID),UserRepo.Delete(id),删除用户
/api/v1/users/change-password,PUT,userHandler.ChangePassword,"UserService.ChangePassword(userID, req.OldPassword, req.NewPassword)","UserRepo.UpdatePassword(id, hashedPassword)",用户修改自己的密码
/api/v1/users/:id/reset-password,PUT,userHandler.ResetPassword,"UserService.ResetPassword(userID, req.NewPassword)","UserRepo.UpdatePassword(id, hashedPassword)",管理员重置用户密码
/api/v1/users-roles/:username,POST,userHandler.AssignRole,"UserService.AddRoleForUser(username, req.RoleIdent)",UserRepo.GetByUsername(username) + UserRepo.Update(user),为用户分配角色
/api/v1/users-roles/:username,DELETE,userHandler.RemoveRole,"UserService.RemoveRoleForUser(username, req.RoleIdent)",UserRepo.GetByUsername(username) + UserRepo.Update(user),移除用户的角色
/api/v1/users-roles/:username,GET,userHandler.GetUserRoles,UserService.GetUserRoles(username),UserRepo.GetByUsername(username),获取用户的角色列表
/api/v1/roles,POST,roleHandler.CreateRole,RoleService.CreateRole(req),RoleRepo.Create(role),创建新角色
/api/v1/roles,GET,roleHandler.GetRoles,"RoleService.GetRoles(pageSize, offset)","RoleRepo.List(limit, offset) + RoleRepo.GetTotal()",获取角色列表（分页）
/api/v1/roles/:id,GET,roleHandler.GetRole,RoleService.GetRoleByID(roleID),RoleRepo.GetByID(id),根据ID获取角色详情
/api/v1/roles/:id,PUT,roleHandler.UpdateRole,RoleService.UpdateRole(req),RoleRepo.Update(role),更新角色信息
/api/v1/roles/:id,DELETE,roleHandler.DeleteRole,RoleService.DeleteRole(roleID),RoleRepo.Delete(id),删除角色
/api/v1/menus,POST,menuHandler.CreateMenu,MenuService.CreateMenu(req),MenuRepo.Create(menu),创建新菜单
/api/v1/menus,GET,menuHandler.GetUserMenus,MenuService.GetUserMenus(userID),MenuRepo.GetByUserID(userID),获取当前用户可见的菜单
/api/v1/menus/all,GET,menuHandler.GetAllMenus,MenuService.GetAllMenus(),MenuRepo.GetAll(),获取所有菜单（包含子菜单）
/api/v1/menus/:id,PUT,menuHandler.UpdateMenu,MenuService.UpdateMenu(req),MenuRepo.Update(menu),更新菜单信息
/api/v1/menus/:id,DELETE,menuHandler.DeleteMenu,MenuService.DeleteMenu(menuID),MenuRepo.Delete(id),删除菜单
/api/v1/roles/:id/menus,POST,roleMenuHandler.AssignMenuToRole,"RoleMenuService.AssignMenuToRole(roleID, req.MenuIDs)","RoleMenuRepo.CreateRoleMenus(roleMeans)",为角色分配菜单权限
/api/v1/roles/:id/menus,GET,roleMenuHandler.GetRoleMenus,RoleMenuService.GetUserMenusByID(roleID),RoleMenuRepo.GetRoleMenuByID(roleId),获取角色的菜单权限
/api/v1/roles/:id/menus,DELETE,roleMenuHandler.RemoveMenuFromRole,"RoleMenuService.RemoveMenuFromRole(roleID, req.MenuIDs)","RoleMenuRepo.DeleteRoleMenus(roleID, menuIDs)",移除角色的菜单权限
/api/v1/roles/:id/policies,POST,permissionHandler.AddPolicy,"PermissionService.AddPolicy(roleID, req.Path, req.Method)","RoleRepo.GetIdent(roleID) + casbin.Enforcer.AddPolicy(sub, path, method)",为角色添加权限策略（Casbin）
/api/v1/roles/:id/policies,DELETE,permissionHandler.RemovePolicy,"PermissionService.RemovePolicy(roleID, req.Path, req.Method)","RoleRepo.GetIdent(roleID) + casbin.Enforcer.RemovePolicy(sub, path, method)",移除角色的权限策略（Casbin）
/api/v1/roles/:id/policies,GET,permissionHandler.GetPolicies,PermissionService.GetPolicies(roleID),"RoleRepo.GetIdent(roleID) + casbin.Enforcer.GetFilteredPolicy(0, sub)",获取角色的权限策略（Casbin）
/api/v1/permissions,POST,permissionHandler.CreatePermission,PermissionService.CreatePermission(req),PermissionRepo.Create(permission),创建权限资源
/api/v1/permissions,GET,permissionHandler.GetPermissions,"PermissionService.GetPermissions(limit, offset, path, method)","PermissionRepo.List(limit, offset, path, method) + PermissionRepo.GetTotal(path, method)",获取权限资源列表（分页）
/api/v1/permissions/all,GET,permissionHandler.GetAllPermissions,"PermissionService.GetAllPermissions(path, method)","PermissionRepo.GetAll(path, method)",获取所有权限资源（不分页）
/api/v1/permissions/:id,GET,permissionHandler.GetPermission,PermissionService.GetPermissionByID(permissionID),PermissionRepo.GetByID(id),获取权限资源详情
/api/v1/permissions/:id,PUT,permissionHandler.UpdatePermission,PermissionService.UpdatePermission(req),PermissionRepo.Update(permission),更新权限资源
/api/v1/permissions/:id/status,PUT,permissionHandler.UpdatePermissionStatus,"PermissionService.UpdatePermissionStatus(permissionID, status)","PermissionRepo.UpdateStatus(id, status)",更新权限资源状态
/api/v1/permissions/:id,DELETE,permissionHandler.DeletePermission,PermissionService.DeletePermission(permissionID),PermissionRepo.Delete(id),删除权限资源
/api/v1/policies,GET,permissionHandler.GetAllPolicies,PermissionService.GetAllPolicies(),casbin.Enforcer.GetPolicy(),获取所有权限策略
