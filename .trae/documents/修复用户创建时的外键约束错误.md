错误原因分析：
您遇到的错误 `Error 1452 (23000): Cannot add or update a child row: a foreign key constraint fails` 是因为 `users` 表中的 `role_id` 字段设置了外键约束，指向 `roles` 表的 `id`。
在 `CreateUser` 方法中，新创建的用户 `user` 对象中，`RoleID` 字段默认是 `0`（因为 `uint` 的零值是 0）。
当 GORM 尝试插入这个用户时，它会试图将 `role_id` 设为 `0`。但是，`roles` 表中通常没有 ID 为 0 的角色。因此，外键约束检查失败。

解决方案：
我们需要修改 `User` 模型，将 `RoleID` 字段改为指针类型 `*uint` 或者使用 `sql.NullInt64`，以便允许该字段为 `NULL`。当用户没有角色时（如刚创建时），数据库中该字段应存为 `NULL`，而不是 `0`。

计划步骤：
1.  **修改 `backend/internal/model/user.go`**:
    *   将 `RoleID` 的类型从 `uint` 改为 `*uint`。
    *   或者，如果想保留 `uint`，需要在创建用户时确保不设置该字段，让数据库使用默认值（如果有 `DEFAULT NULL`），但在 GORM 中，零值 `0` 会被尝试插入。所以改为指针 `*uint` 是最稳妥的方法，GORM 会将 `nil` 指针处理为 SQL `NULL`。

2.  **验证 `backend/internal/service/user.go`**:
    *   检查 `CreateUser` 中 `User` 结构体的初始化。由于 `RoleID` 改为指针，未赋值时默认为 `nil`，这将正确插入 `NULL` 到数据库，从而避开外键约束（前提是该列允许 NULL）。
    *   检查 `AddRoleForUser` 和 `RemoveRoleForUser` 中的逻辑，适配指针类型的 `RoleID`。

3.  **数据库迁移**:
    *   GORM 的 `AutoMigrate` 会自动处理列类型的变更（从 `int unsigned` 到允许 `NULL`）。如果之前已经是允许 NULL 的列，改为指针后 GORM 插入逻辑会变正常。

**重要确认**: 数据库中的 `users.role_id` 列必须允许 `NULL` 值。

请确认执行此修复计划。